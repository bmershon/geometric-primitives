<!--Programmer: Chris Tralie!-->
<!--Purpose: Front end point chooser / debugger for angle function!-->
<html>
<head>
<!-- This is how you include external scripts in Javascript !-->
<script src = "GeomPrimitives.js"></script>
<script src= "gl-matrix-min.js"></script>
<script src = "plotly.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<body>

<div id = "viz"></div>

<script>

"use strict";
function update() {

    var data = [];

    var color = d3.scale.category10();

    var a = vec3.create(),
        b = vec3.create(),
        c = vec3.create(),
        d = vec3.create();

    vec3.random(a, 1);
    vec3.random(b, 1);
    vec3.random(c, 1);
    vec3.random(d, 1);


    var letter = ['a', 'b', 'c', 'd'];
    var vertices = [a, b, c, d];
    var faces = [[0, 1, 2], [0, 2, 3], [1, 2, 3], [0, 3, 1]];

    // tetrahedron vertices
    for(var i = 0; i < vertices.length; i++){
      let v = vertices[i];
      data.push({
        x: [v[0]], y: [v[1]], z: [v[2]],
        mode: 'markers+lines', line: {color: '#ffffff', width: 10},
        type: 'scatter3d', name: letter[i],
        marker: {color: color(i), size: 10, symbol: 'circle'}
      });
    }

    // face calculations
    for(var i = 0; i < faces.length; i++) {
      let face = faces[i];
      let points = face.map(function(d) { return vertices[d];});
      let c = getTriangleCircumcenter.apply(null, points).Circumcenter;
      data.push({
        x: [c[0]], y: [c[1]], z: [c[2]],
        mode: 'markers+lines', line: {color: '#ffffff', width: 10},
        type: 'scatter3d', name: face.map(function(d) {return letter[d]}).join(''),
        marker: {color: "#000", size: 5, symbol: 'circle'}
      });
      let n = vec3.create();
      let f = vec3.create();
      let e1 = vec3.create();
      let e2 = vec3.create();
      vec3.sub(e1, points[0], points[2]);
      vec3.sub(e2, points[0], points[1]);
      vec3.cross(n, e1, e2);
      vec3.normalize(n, n);
      vec3.add(f, c, n);
      data.push({
        x: [c[0], f[0]], y: [c[1], f[1]], z: [c[2], f[2]],
        mode: 'lines', line: {color: '#555555', width: 10},
        type: 'scatter3d', name: "normal",
      });
    }

    var axes = getAxesEqual([a, b, c]);
    data = data.concat([axes.x, axes.y, axes.z]);
    // var data = [$a, $b, $c, $d, $ab, $ac, $abcCenter,$abdCenter, axes.x, axes.y, axes.z];
    var layout = {
      autosize: false, width: 900, height: 500,
      margin: { l: 0, r: 0, b: 0, t: 65 }
    };
    Plotly.newPlot('viz', data, layout);    
}

update();

</script>

</body>
</html>
